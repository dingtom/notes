目前的基于802.11n协议的WIFI技术采用MIMO-OFDM系统（即AP多个发射天线，接收网卡多个接收天线，且利用OFDM技术进行载波调制），在20MHZ HT传输模式中，一个无线通信信道利用OFDM技术被调制为64个子载波，子载波标号为[-28,-1]和[1,28]，中心直流子载波标号为0，用于传送空符号。IEEE 802.11n使用了其中56个子载波，且其中52个用于传输数据信号，4个用于传输导频信号。利用Daniel Halperin提供的工具软件，可以获取其中30个子载波的具体信息。如图2所示。（为什么只能获得30个？由802.11n协议和intel 5300网卡决定，目前基于Atheros网卡设备可以获得全部56个载波信息）

**高频率信号**：
频率越高，穿透能力（不变方向）越强，信号穿透会损失很大能量，所以传输距离越近，波长越短，饶射（衍射效果）能力越弱。


**频域下的信道模型**信道可以被   $Y=HX+N $ 模型表示$Y$，$X$各自代表接受到的和发射的信号向量，$N$代表信道噪音向量,$H$是信道矩阵，信道矩阵$H$以信道状态信息的格式表示。具体来说,当前的WiFi标准(如IEEE)求信道状态信息就是求信道矩阵H



**MIMO**（Multiple-Input Multiple-Output，多输入多输出）技术：指在发射端和接收端分别使用多个发射天线和接收天线，使信号通过发射端与接收端的多个天线传送和接收，从而改善通信质量.
其中分集和复用又是MIMO的两项最基本的技术。简单来说，分集就是把一个数据重复发送多次，以保证接收端能够正确收到，在MIMO系统中，可以利用多个发射天线同时发送相同的信息，接收端也同时接收并解析出来，从而提高了传输准确性。而复用则是指利用所有的资源来发送不同的数据，在MIMO系统中，可以利用多个天线对发送不同的信息，从而提高通信的速度。从概念上来说，这又是一个鱼与熊掌兼得的问题？事实上，一套完整的通信物理层协议会定义许多种发送方式。在实际通信过程中，收发双方会根据即时的通信条件和传播环境等因素，自适应的调整并选择最优的方式进行通信。比如，当无线信道条件很差的时候，会更多的用到分集技术，来保证通信的可靠性；当信道条件良好的时候，就会选择复用，每次多发一些数据，以提高传输的速率。具体的发送方式也更加复杂，采取的是从时间和空间的两个角度发送——空时编码（具体与本研究无关，但需要注意的是，因为分集的存在，设备收发天线可能存在选择问题）。

**接收端的等效基带信号、多径衰落**： 在静态场景下（每条路径的多普勒频移为0), 设发射信号的等效基带信号为$x(t)$, 其共沿$N_p$条路径到达接收机， 忽略噪声的影响， 则**接收端的等效基带信号为**
$$
y(t)=\sum_{n=1}^{N_{p}} a_{n}(t) e^{-j 2 \pi f_{c} \tau_{n}(t)} x\left(t-\tau_{n}(t)\right)
$$
式中，$n=1$时对应LOS路径，$a_n(t)$表示第$n$条路径在时刻$t$的幅值， 其值与大尺度路径损耗和阴影衰落相关。$\tau_n(t)$表示第$n$条路径的传播时延，$f_c $为载波 频率，$-2\pi f_c\tau_n(t)$则为时延$ \tau_n(t)$造成的相位偏移。由此可见， **由于$a_n(t)$、$\tau_n(t)$ 的不断变化，会使得多径信号幅值和相位不断变化。根据信号同相增强，反相消减原理， 具有不同幅值和相位的多径信号叠加后会造成合成信号$y(t)$的幅度和相位发生剧烈波动， 即产生多径衰落。**

**时间色散**：除了引发接收信号强度衰落或波动以外， **不同多径信号由于到达时间的差异在时域上叠加会产生时间色散现象**[^80], 从而容易造成两个连续发送的符号数据（码元）之间发生混叠， 引起符号间干扰(Inter-Symbol Interference, ISI), 影响网络通信质量。无线网络受时间色散的影响程度可通过**时延扩展**来衡量，如最大时延扩展$\tau_{max}$其表示最早和最晚到达接收机的多径分量之间的时延差。

**相干带宽**： 与时延扩展相关的另一个信道参数是相干带宽$B_c$, 实际应用中其数值可定义为$\tau_{max}$的倒数， 即$B_c= \frac{1}{\tau_{max}}$。 无线通信中的信道基本均为包含一定频段的带宽信道， **相干带宽则用于表征信道中两个频率分量之间相关性程度**。 当两个不同频率信号间隔小于$B_c$时， 信号间的相关性较高， 信号呈现一致性衰落；而当信号间隔大于$B_c$时， 不同频率信号的相关性减弱， 呈现近似独立性衰落 [^80] 。

**频率色散**：当发射机和接收机之间存在相对运动或信道中存在运动物体时， 会使得多径信号产生多普勒频移而引入新的频率成分， 造成接收信号的频谱相对于发射信号频谱被扩展，该现象即为频率色散。频率色散反映了信道的时变特性，可通**过多普勒扩展$B_d$或相干时间$T_c $进行表征**。 

**多普勒扩展**：类似于时延扩展，多普勒扩展表征的是信道时变特性所能引起的频谱展宽程度，可取值为$B_d=f_m$。 
设接收机相对于发射机的运动速度为$v$, 信号波长为$\lambda$，则多径信号中可产生的最大多普勒频移为$f_m =v/\lambda$。

**相干时间**:可定义为$T_c= 1/B_d$。 在相干时间间隔内， 两个到达信号的相关性较强，受频率色散影响程度相近；反之，两个到达信号相关性较小， 受频率色散的影响差别较大。 在无线通信中， 当符号周期$T>T_c$或信道带宽$B_w<B_d$时， 频率色散会严重影响正常通信， 此时信道为快衰落信道。 而当$T<T_c$或$B_w>B_d$时， 信道受频率色散影响较小， 信道变为慢衰落信道。


**时间色散（或时延扩展）制约了无线信道容量的上限，使得系统在相邻码元之间必须留有一定的时间间隔以应对ISI。频率色散（或多普勒扩展）限定了无线信道容量的下限**，** 实际应用中， 通常要求信道带宽$B_w >> B_d$, 以减轻多普勒频移对系统的干扰。







**NIC**：网络接口卡（5300网卡），Intel 5300 NIC只能反映出CSI56个子载波中的30个




**OFDM**（orthogonal frequency division modulation）：总频谱被划分为多个正交的（20MHz）分成多个（56）频率子带（称为子载波），无线数据使用相同的调制和编码方法在子载波上传输




**信道频率响应（ChannelFrequence Response,CFR）**：信号在不同频率范围内，信号特性的响应，一般包含幅度/频率和相位/频率两种响应。





**信道冲激响应（Channel Impulse Response, CIR）**：信号经过不同时间（不同的传播路径导致传播所需时间不同）到达接收方的信号能量值。CIR和CFR满足互为傅里叶变换。
基于信号处理理论，**接收信号**通常可表示为**发射信号与信道冲激响应(Chan­nel Impulse Response, CIR)的卷积** [^78] 。 在实际分析时， **常将带通信道转换成等效基带信道**，即采用等效基带信道冲激响应对网络信道进行建模。因此公式(2.6) 中的接收信号可展示为
$$
y(t)=\sum_{n=1}^{N_{p}} a_{n}(t) e^{-j \phi_{n}(t)} x\left(t-\tau_{n}(t)\right)=\int_{-\infty}^{+\infty} h(\tau, t) x(t-\tau) d \tau
$$
式中如$\phi(t)$为时延$\tau_n (t)$引起的相移与多普勒频移引起的相移之和， 且一般认为 $\phi(t)$与路径损耗和阴影衰落相关的$a_n (t)$之间是相互独立的。$h(\tau, t)$即为等效基带冲激响应， 参数$t$指示了无线信道的时变特性。$h(\tau, t)$表示时刻$t-\tau$发射的信号脉冲在时刻$t$的响应结果。

**RSS**：是指**客户端接收的无线信号强度（Received Signal Strength）**，**属于MAC层**，**来自每个数据包**。比如手机上，我们经常会看到 Wi-Fi 信号不满格，一般认为信号不好。我个人理解就是指 RSS 不够强。一般 RSS  的强度受到三个方面影响：1）路径衰减；2）遮挡；3）多径效应。利用当前的WiFi设备获取的RSS不太精确，不过可以利用RSS信息做一些应用，例如室内定位、目标对象移动侦测一类的。



**CSI**：是衡量信道情况的信道状态信息（Channel State Information）,**属于PHY层**，**来自OFDM系统下解码的子载波**。


注：关于0x4101的具体说明如下
![image.png](https://upload-images.jianshu.io/upload_images/15873283-a7490760f286bb19.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
14-16位全设置为1，表示分别打开天线1、2、3

13位：保护间隔，1表示0.4微秒，0表示0.8微秒

12位：重复在20MHz信道1上的数据，b11位必须设置为一

11位：WiFi信道的带宽，1表示40MHz，0表示20MHz

10位：绿色域序列为1，传统序列为0

9位：调制类型，CCK为1,OFDM为0

8位：高吞吐率模式速率为1，传统模式速率为0

5-7位：默认3个0

3-4位：单流-0，双流-2，三流-3

0-2位：速率选择位

总共17位

无线信道一般用信道的冲击响应（Channel Impulse Response，CIR）来对信道的多径效应进行描述，在线性时不变的假设条件下，信道冲击响应可用下式表示
![image.png](https://upload-images.jianshu.io/upload_images/15873283-923bdc07361ed4e5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
![image.png](https://upload-images.jianshu.io/upload_images/15873283-86a2ad4c23bd004f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
![image.png](https://upload-images.jianshu.io/upload_images/15873283-3d55fb0ba7ee13a0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


